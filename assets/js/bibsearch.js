import{highlightSearchTerm}from"./highlight-search-term.js";document.addEventListener("DOMContentLoaded",()=>{const e=()=>{document.querySelectorAll("section.topic").forEach(e=>{const l=e.querySelector(".bibliography li:not(.unloaded), .bibliography dt:not(.unloaded)");e.classList.toggle("unloaded",!l)})},l=l=>{if(document.querySelectorAll(".bibliography, .unloaded").forEach(e=>e.classList.remove("unloaded")),CSS.highlights){const e=highlightSearchTerm({search:l,selector:".bibliography > li"});if(null==e)return;e.forEach(e=>e.classList.add("unloaded"))}else document.querySelectorAll(".bibliography > li").forEach(e=>{e.innerText.toLowerCase().includes(l)||e.classList.add("unloaded")});document.querySelectorAll("h2.bibliography").forEach(e=>{let l=e.nextElementSibling,o=!0;for(;l&&"H2"!==l.tagName;){if("OL"===l.tagName){const e=l.querySelectorAll(":scope > li").length;l.querySelectorAll(":scope > li.unloaded").length===e?(l.previousElementSibling.classList.add("unloaded"),l.classList.add("unloaded")):o=!1}l=l.nextElementSibling}o&&e.classList.add("unloaded")}),e()},o=document.getElementById("bibsearch"),t=()=>{const e=decodeURIComponent(window.location.hash.slice(1));o.value=e,l(e.toLowerCase())};let i;o.addEventListener("input",()=>{clearTimeout(i),i=setTimeout(()=>l(o.value.toLowerCase()),300)}),window.addEventListener("hashchange",t),t()});